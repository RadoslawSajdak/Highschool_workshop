<!doctype html><html lang=en dir=auto>
<head><meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no">
<meta name=robots content="index, follow">
<title>Setting up VirtualBox | </title>
<meta name=keywords content>
<meta name=description content="Requirements Because we wanted to provide low weight and similar environment for everyone we created a VirtualBox image. Before you download it, please install virtual box with version 7.1.14. You can download it from the virtualbox.org
Now you can download the VirtualBox image from https://ubuntu1224.hexu.pl
This image contains:
 Ubuntu 24.04 Docker Compose Code JLink drivers nrfjprog tools VirtualBox extension pack Brave browser  To unzip the file, please ask for the password.">
<meta name=author content="Radosław Sajdak">
<link rel=canonical href=/zephyr/virtualbox/>
<link crossorigin=anonymous href=/assets/css/stylesheet.6a98292fb8fa8cf0f3ba4042d4b75515c04267550f3ad49ff6271b5af9562443.css integrity="sha256-apgpL7j6jPDzukBC1LdVFcBCZ1UPOtSf9icbWvlWJEM=" rel="preload stylesheet" as=style>
<script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=favicon.ico>
<link rel=icon type=image/png sizes=16x16 href=favicon-16x16.png>
<link rel=icon type=image/png sizes=32x32 href=favicon-32x32.png>
<link rel=apple-touch-icon href=apple-touch-icon.png>
<link rel=mask-icon href=safari-pinned-tab.svg>
<meta name=theme-color content="#2e2e33">
<meta name=msapplication-TileColor content="#2e2e33">
<noscript>
<style>#theme-toggle,.top-link{display:none}</style>
</noscript>
<script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(a,e,f,g,b,c,d){a.GoogleAnalyticsObject=b,a[b]=a[b]||function(){(a[b].q=a[b].q||[]).push(arguments)},a[b].l=1*new Date,c=e.createElement(f),d=e.getElementsByTagName(f)[0],c.async=1,c.src=g,d.parentNode.insertBefore(c,d)}(window,document,'script','https://www.google-analytics.com/analytics.js','ga'),ga('create','UA-123-45','auto'),ga('send','pageview'))</script><meta property="og:title" content="Setting up VirtualBox">
<meta property="og:description" content="Requirements Because we wanted to provide low weight and similar environment for everyone we created a VirtualBox image. Before you download it, please install virtual box with version 7.1.14. You can download it from the virtualbox.org
Now you can download the VirtualBox image from https://ubuntu1224.hexu.pl
This image contains:
 Ubuntu 24.04 Docker Compose Code JLink drivers nrfjprog tools VirtualBox extension pack Brave browser  To unzip the file, please ask for the password.">
<meta property="og:type" content="article">
<meta property="og:url" content="/zephyr/virtualbox/"><meta property="article:section" content="zephyr">
<meta property="article:published_time" content="2024-12-28T16:41:57+01:00">
<meta property="article:modified_time" content="2024-12-28T16:41:57+01:00"><meta property="og:site_name" content="true">
<meta name=twitter:card content="summary">
<meta name=twitter:title content="Setting up VirtualBox">
<meta name=twitter:description content="Requirements Because we wanted to provide low weight and similar environment for everyone we created a VirtualBox image. Before you download it, please install virtual box with version 7.1.14. You can download it from the virtualbox.org
Now you can download the VirtualBox image from https://ubuntu1224.hexu.pl
This image contains:
 Ubuntu 24.04 Docker Compose Code JLink drivers nrfjprog tools VirtualBox extension pack Brave browser  To unzip the file, please ask for the password.">
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Intro to BLE with Zephyr and Docker","item":"/zephyr/"},{"@type":"ListItem","position":3,"name":"Setting up VirtualBox","item":"/zephyr/virtualbox/"}]}</script>
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Setting up VirtualBox","name":"Setting up VirtualBox","description":"Requirements Because we wanted to provide low weight and similar environment for everyone we created a VirtualBox image. Before you download it, please install virtual box with version 7.1.14. You can download it from the virtualbox.org\nNow you can download the VirtualBox image from https://ubuntu1224.hexu.pl\nThis image contains:\n Ubuntu 24.04 Docker Compose Code JLink drivers nrfjprog tools VirtualBox extension pack Brave browser  To unzip the file, please ask for the password.","keywords":[],"articleBody":"Requirements Because we wanted to provide low weight and similar environment for everyone we created a VirtualBox image. Before you download it, please install virtual box with version 7.1.14. You can download it from the virtualbox.org\nNow you can download the VirtualBox image from https://ubuntu1224.hexu.pl\nThis image contains:\n Ubuntu 24.04 Docker Compose Code JLink drivers nrfjprog tools VirtualBox extension pack Brave browser  To unzip the file, please ask for the password.\nImporting the image TODO\n screnshots with step by step manual  Attaching USB devices TODO\n Screenshots how to attach USB device to the vm  Using the environment If ANY image is not clear, you can click it with RB and use “Open image in new tab” :)\nVirtual Machine (VM) is set for an easy development. For making the code we’ll use Code with a dev containers extension. It allows us to attach directly to the docker container and develop inside it. This solution is very flexible, because if you mess something you can just rebuild the container. Moreover you can quickly run exact the same container with a different setups and operating systems.\nVS Code  Open the VS Code Choose Remote explorer extension. Make sure it’s set to Dev Containers (it may be used for eg. ssh) Select zephyr_ble_lab with right button and press “Attach in current window”. On the bottom you should see the container you are attached to.  You may want to use terminal which is in the middle of the screen. You can also open it from the menu on the top. In our container, terminal is in sh. Type bash to run more user friendly shell. If it’s not opened, with file explorer (or FileOpen Folder) open hello_world folder.\nYou should see the main development window.\n It’s file tree. It’s usefull to navigate in your project This is main window with main.c file opened. The project is imported from the zephyr codebase. This is NRF Connect extension. We used 2023.11.3 version because the newest is not working good enough.   NRF Connect for VS Code First, please open the VS Code Extension. Side view will change. For this project we predefined build for nRF52840DK but you can change it pressing Add build configuration. For now it’s not necessary.\nIn general, this extension will help us to build the examples and nothing else. For you it may be very helpfull if you want to explore different examples - it allows user to import the examples from SDK and helps with build configurations (samples are usually compatible with a few boards). On screen below we marked main 3 bookmarks:\n Welcome - creating new samples from source Applications - here you can define your builds Actions - We will use Build and Pristine Build only. Other actions are helpful for more advanced development. However, nrfconnect for VS Code has the problems with handling USB while running inside the docker. That’s why we’ll flash from the outside.  In general, every action is just user-friendly button with west command below. You can read more about the west commands here. Building and flashing Let’s build our first project to make sure everything is set up properly.\nPlease run Pristine Build based on the informations from the previous steps. On the right side you should see temporary terminal with no errors.\nIf you don’t have any build configuration, please add one for nrf52840DK/nrf52840 with all default. In our example, folder PROJECTS is attached to the container so it’s shared with the host. Please open terminal on the host, and go to /home/devbox/Desktop/Codes/Zephyr_BLE_LAB/PROJECTS/hello_world where you should see build directory. It’s generated during the compilation. It contains entire setup and configuration of the project but for us, interesting file is build/zephyr/zephyr.hex. It’s our compiled binary file.\nTo write it on development kit we will use nrfjprog tool from Nordic Semiconductor. It’s outdated for a few weeks but is’t more familiar to me. You can program the device with nrfjprog --program build/zephyr/zephyr.hex --sectoranduicrerase --verify; nrfjprog -r. If it doesn’t find a USB device, please make sure it’s attached to the VirtualBox. Looking for the output We have installed cutecom on our VM. You can use it to read serial output from the development kit. Default baudrate for serial output is set to 115200.\nReset your board to see the output :) ","wordCount":"715","inLanguage":"en","datePublished":"2024-12-28T16:41:57+01:00","dateModified":"2024-12-28T16:41:57+01:00","author":{"@type":"Person","name":"Radosław Sajdak"},"mainEntityOfPage":{"@type":"WebPage","@id":"/zephyr/virtualbox/"},"publisher":{"@type":"Organization","name":"","logo":{"@type":"ImageObject","url":"favicon.ico"}}}</script>
</head>
<body class=dark id=top>
<script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove('dark')</script>
<header class=header>
<nav class=nav>
<div class=logo>
<div class=logo-switches>
<button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
</button>
</div>
</div>
<ul id=menu>
</ul>
</nav>
</header>
<main class=main>
<article class=post-single>
<header class=post-header>
<div class=breadcrumbs><a href>Home</a>&nbsp;»&nbsp;<a href=/zephyr/>Intro to BLE with Zephyr and Docker</a></div>
<h1 class=post-title>
Setting up VirtualBox
</h1>
<div class=post-meta><span title="2024-12-28 16:41:57 +0100 CET">December 28, 2024</span>&nbsp;·&nbsp;715 words&nbsp;·&nbsp;Radosław Sajdak
</div>
</header> <div class=toc>
<details>
<summary accesskey=c title="(Alt + C)">
<span class=details>Table of Contents</span>
</summary>
<div class=inner><nav id=TableOfContents>
<ul>
<li><a href=#importing-the-image>Importing the image</a></li>
<li><a href=#attaching-usb-devices>Attaching USB devices</a></li>
<li><a href=#using-the-environment>Using the environment</a>
<ul>
<li><a href=#vs-code>VS Code</a></li>
<li><a href=#nrf-connect-for-vs-code>NRF Connect for VS Code</a></li>
<li><a href=#building-and-flashing>Building and flashing</a></li>
<li><a href=#looking-for-the-output>Looking for the output</a></li>
</ul>
</li>
</ul>
</nav>
</div>
</details>
</div>
<div class=post-content><h1 id=requirements>Requirements<a hidden class=anchor aria-hidden=true href=#requirements>#</a></h1>
<p>Because we wanted to provide low weight and similar environment for everyone we created a VirtualBox image. Before you download it, please install virtual box with version 7.1.14.
You can download it from the <a href=https://www.virtualbox.org/wiki/Downloads>virtualbox.org</a></p>
<p>Now you can download the VirtualBox image from <a href=https://ubuntu1224.hexu.pl>https://ubuntu1224.hexu.pl</a></p>
<p>This image contains:</p>
<ul>
<li>Ubuntu 24.04</li>
<li>Docker Compose</li>
<li>Code</li>
<li>JLink drivers</li>
<li>nrfjprog tools</li>
<li>VirtualBox extension pack</li>
<li>Brave browser</li>
</ul>
<p>To unzip the file, please ask for the password.</p>
<h2 id=importing-the-image>Importing the image<a hidden class=anchor aria-hidden=true href=#importing-the-image>#</a></h2>
<p>TODO</p>
<ul>
<li>screnshots with step by step manual</li>
</ul>
<h2 id=attaching-usb-devices>Attaching USB devices<a hidden class=anchor aria-hidden=true href=#attaching-usb-devices>#</a></h2>
<p>TODO</p>
<ul>
<li>Screenshots how to attach USB device to the vm</li>
</ul>
<h2 id=using-the-environment>Using the environment<a hidden class=anchor aria-hidden=true href=#using-the-environment>#</a></h2>
<p><strong>If ANY image is not clear, you can click it with RB and use &ldquo;Open image in new tab&rdquo; :)</strong></p>
<p>Virtual Machine (VM) is set for an easy development. For making the code we&rsquo;ll use Code with a <code>dev containers</code> extension. It allows us to attach directly to the docker container and develop inside it. This solution is very flexible, because if you mess something you can just rebuild the container. Moreover you can quickly run exact the same container with a different setups and operating systems.</p>
<h3 id=vs-code>VS Code<a hidden class=anchor aria-hidden=true href=#vs-code>#</a></h3>
<ol>
<li>Open the VS Code</li>
<li>Choose Remote explorer extension. Make sure it&rsquo;s set to Dev Containers (it may be used for eg. ssh)</li>
<li>Select <code>zephyr_ble_lab</code> with right button and press &ldquo;Attach in current window&rdquo;.</li>
<li>On the bottom you should see the container you are attached to.</li>
</ol>
<p>You may want to use terminal which is in the middle of the screen. You can also open it from the menu on the top. In our container, terminal is in <code>sh</code>. Type <code>bash</code> to run more user friendly shell.
<img loading=lazy src=images/vscode_run.png#center alt="first run of vscode">
</p>
<p>If it&rsquo;s not opened, with file explorer (or File>Open Folder) open <code>hello_world</code> folder.</p>
<p>You should see the main development window.</p>
<ol>
<li>It&rsquo;s file tree. It&rsquo;s usefull to navigate in your project</li>
<li>This is main window with <code>main.c</code> file opened. The project is imported from the zephyr codebase.</li>
<li>This is NRF Connect extension. We used <code>2023.11.3</code> version because the newest is not working good enough.
<img loading=lazy src=images/vscode_main.png#center alt="VS Code view">
</li>
</ol>
<h3 id=nrf-connect-for-vs-code>NRF Connect for VS Code<a hidden class=anchor aria-hidden=true href=#nrf-connect-for-vs-code>#</a></h3>
<p>First, please open the VS Code Extension. Side view will change. For this project we predefined build for <code>nRF52840DK</code> but you can change it pressing <code>Add build configuration</code>. For now it&rsquo;s not necessary.</p>
<p>In general, this extension will help us to build the examples and nothing else. For you it may be very helpfull if you want to explore different examples - it allows user to import the examples from SDK and helps with build configurations (samples are usually compatible with a few boards). On screen below we marked main 3 bookmarks:</p>
<ol>
<li>Welcome - creating new samples from source</li>
<li>Applications - here you can define your builds</li>
<li>Actions - We will use <code>Build</code> and <code>Pristine Build</code> only. Other actions are helpful for more advanced development. However, nrfconnect for VS Code has the problems with handling USB while running inside the docker. That&rsquo;s why we&rsquo;ll flash from the outside.</li>
</ol>
<p>In general, every action is just user-friendly button with <code>west</code> command below. You can read more about the west commands <a href=https://docs.zephyrproject.org/latest/develop/west/build-flash-debug.html>here</a>.
<img loading=lazy src=images/vscode_nrfconnect.png#center alt="NRF connect view">
</p>
<h3 id=building-and-flashing>Building and flashing<a hidden class=anchor aria-hidden=true href=#building-and-flashing>#</a></h3>
<p>Let&rsquo;s build our first project to make sure everything is set up properly.</p>
<p>Please run <code>Pristine Build</code> based on the informations from the previous steps. On the right side you should see temporary terminal with no errors.</p>
<p>If you don&rsquo;t have <strong>any</strong> build configuration, please add one for <code>nrf52840DK/nrf52840</code> with all default.
<img loading=lazy src=images/vscode_build_hello_world.png#center alt="Build Hello World">
</p>
<p>In our example, folder PROJECTS is attached to the container so it&rsquo;s shared with the host. Please open terminal on the host, and go to <code>/home/devbox/Desktop/Codes/Zephyr_BLE_LAB/PROJECTS/hello_world</code> where you should see <code>build</code> directory. It&rsquo;s generated during the compilation. It contains entire setup and configuration of the project but for us, interesting file is <code>build/zephyr/zephyr.hex</code>. It&rsquo;s our compiled binary file.</p>
<p>To write it on development kit we will use <code>nrfjprog</code> tool from Nordic Semiconductor. It&rsquo;s outdated for a few weeks but is&rsquo;t more familiar to me. You can program the device with <code>nrfjprog --program build/zephyr/zephyr.hex --sectoranduicrerase --verify; nrfjprog -r</code>. If it doesn&rsquo;t find a USB device, please make sure it&rsquo;s attached to the VirtualBox.
<img loading=lazy src=images/vscode_flashing.png#center alt="Flashing the device">
</p>
<h3 id=looking-for-the-output>Looking for the output<a hidden class=anchor aria-hidden=true href=#looking-for-the-output>#</a></h3>
<p>We have installed <code>cutecom</code> on our VM. You can use it to read serial output from the development kit. Default baudrate for serial output is set to <code>115200</code>.</p>
<p>Reset your board to see the output :)
<img loading=lazy src=images/vscode_cutecom.png#center alt="Serial output">
</p>
</div>
<footer class=post-footer>
<ul class=post-tags>
</ul>
</footer>
</article>
</main>
<footer class=footer>
<span>&copy; 2024 <a href></a></span>
<span>
Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a>
</span>
</footer>
<a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a>
<script>let menu=document.getElementById('menu');menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})})</script>
<script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script>
<script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'))})</script>
<script>document.querySelectorAll('pre > code').forEach(b=>{const c=b.parentNode.parentNode,a=document.createElement('button');a.classList.add('copy-code'),a.innerHTML='copy';function d(){a.innerHTML='copied!',setTimeout(()=>{a.innerHTML='copy'},2e3)}a.addEventListener('click',e=>{if('clipboard'in navigator){navigator.clipboard.writeText(b.textContent),d();return}const a=document.createRange();a.selectNodeContents(b);const c=window.getSelection();c.removeAllRanges(),c.addRange(a);try{document.execCommand('copy'),d()}catch(a){}c.removeRange(a)}),c.classList.contains("highlight")?c.appendChild(a):c.parentNode.firstChild==c||(b.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?b.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(a):b.parentNode.appendChild(a))})</script>
</body>
</html>